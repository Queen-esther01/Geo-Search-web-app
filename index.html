<!DOCTYPE html>
<html>
    <head>
        <title>Geo-Search web app</title>
        <meta charset="utf-8"> 
        <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/2c1c76b735.js" crossorigin="anonymous" ></script>
        <link href="https://fonts.googleapis.com/css?family=Satisfy&display=swap" rel="stylesheet">
    </head>
    <style>
        body{
            background-color: #026873;
            margin: 0;
        }
        h1{
            color: #188D90;
            text-align: center;
            font-size: 2.5em;
            margin-left: 25px;
            font-family: 'Satisfy', cursive;
        }
        
        [input-container]{
            text-align: center;
            padding: 30px;
        }
        [input-container] input{
            width: 300px;
            padding: 10px;
            outline: none;
            border: none;
        }
        @media(max-width: 500px){
            [input-container] input{
                width: 160px;
            }
        }
        [input-container] button{
            padding: 10px;
            background-color: #F29484;
            border: none;
            color: white;
            outline: none;
        }
        [input-container] button:hover{
            background-color: rgb(138, 6, 17);
            color: white;
        }
        #heading-container p{
            text-align: center;
            font-size: 1.7em;
            line-height: 1.5em;
            color: white;
            margin-top: 60px;
        }
        #weather-report-container p{
            font-size: 1.5em;
            color: #026873;
            text-align: center;
            line-height: 1.3em;
        }
        @media(max-width: 800px){
            #heading-container p{
                font-size: 1.3em;
            }
            #weather-report-container p{
                font-size: 1.3em;
            }
        }
        #weather-report-container h2{
            font-size: 2em;
            color: #026873;
            text-align: center;
        }
        @media(max-width: 500px){
            #weather-report-container h2{
                font-size: 1.7em;
            }
        }
        #weather-report-container{
            width: 70%;
            margin: 0 auto;
            background-color: #ACF2DE;
            padding: 20px;
            border-radius: 5px;
            animation-name: weather-report;
            animation-duration: 2s;
            animation-iteration-count: 1;
            animation-timing-function: linear;
        }
        @keyframes weather-report{
                0%{
                    transform: scale(0.5) ;
                }
                50%{
                    transform: scale(1);
                }
            }
        #convert-button-container2 button{
            padding: 10px;
            margin:0 auto;
            background-color: rgb(138, 6, 17);
            color: #ACF2DE;
            outline: none;
            border: none;
        }

        #convert-button-container2 button:hover{
            color: #ACF2DE;
            background-color: #095a63;
        }
        @media(max-width: 500px){
            #convert-button-container2 button{
                padding: 5px;
                }
                
                
            }
        #convert-button-container2{
            text-align: center;
        }
        
        header{
            display: flex;
            background-color: white;
            justify-content: space-between;
        }
        ul li{
            list-style: none;
            float: left;
            margin-top: 32px;
            margin-right: 15px;
            font-size: 1.2em;
            color: teal;
            transition: 1s;
            cursor: pointer;
        }
        ul li:hover{
            color: rgb(8, 87, 87);
        }
        #button-container{
            display: flex;
        }
        #convert-button-container{
              margin-top: -10px;
              padding: 15px;
              border-radius: 5px;
              outline: none;
              border: none;
              color: white;
              cursor: pointer;
              background-image: linear-gradient(80deg,#188D90,#50C2B4);
           }
        #convert-button-container:hover{
            background-image: linear-gradient(80deg, #188D90, #B5F6FA);
        }



        i{
            border: 2px solid teal;
            padding: 6px;
        }
        .menu-icon{
                color: teal;
                text-align: right;
                box-sizing: border-box;
                cursor: pointer;
                padding: 30px 20px;
                display: none;
            }
            @media(max-width: 800px){
                .menu-icon{
                    display: block;
                }
                ul li{
                    display: none;
                }
                
            }
        
            img{
                display: block;
                margin: auto;
                margin-top: 20px;
                border: 5px solid #F29484;
                padding: 10px;
                background-color: white;
            }
            @media(max-width: 800px){
                img{
                    width: 80%;
                }
            }
            #map-image-container{
                background-image: url(Images/calm-body-of-water-1363876.jpg);
                padding: 10px ;
                background-position: center;
                margin-top: 15px;
            }
            
    </style>
    <body>
        <div id="heading-container">
            <header>
                <div>
                    <h1>Geo-Search</h1>
                </div>
                <div id="button-container">
                    <div>
                        <ul>
                            <li>View Map</li>
                            <li>Landmarks</li>
                            <li><button id="convert-button-container">Convert Temperature</button></li>
                        </ul>
                    </div>
                </div>

                <div class="menu-icon">
                        <i class="fa fa-bars fa-2x"></i>
                </div>
            </header>
            
            <p>Search for places of your interest and get information 
                such as timezone, map and local weather conditions like 
                temperature, wind speed, humidity, and precipitation.</p>
            <form input-container id="input-container">
                <input id="city" required placeholder="Search for city" type="text">
                <button type="button" id="search-button">Search</button>
            </form>
        </div>
        
        <div>
            <div id="weather-report-container">
                <div>
                    <h2 id="weather-report-heading"></h2>
                    <p id="weather-report"></p>
                </div>
                <div id="convert-button-container2">
                    <button id="convert-celsius">Convert to celsius</button>
                    <button id="convert-fahrenheit">Convert to fahrenheit</button>
                </div>
                
            </div>
    
            <div id="map-image-container">
                <img id="map-image">
            </div>
            
        </div>
        <div class="fb-share-button" data-href data-layout="button_count" data-size="large"><a target="_blank" id="button-link"  class="fb-xfbml-parse-ignore">Share</a></div>
        
        
        
        
        <script>
            const inputContainer = document.getElementById("input-container");
            const reportSectionHeading = document.getElementById("weather-report-heading");
            const weatherReport = document.querySelector("#weather-report");
            const searchButton = document.getElementById("search-button");
            const reportSectionContainer = document.getElementById("weather-report-container");
            reportSectionContainer.style.display = 'none';
            const mapImageContainer = document.getElementById('#map-image-container')

            const celsius = document.getElementById("convert-celsius");
            const fahrenheit = document.getElementById("convert-fahrenheit");           
            const conversion = document.getElementById("conversion-report");
            
             
            const mapImage = document.getElementById('map-image');

            const getData = () => {
                const cityInput = document.getElementById("city").value;
                fetch('https://api.openweathermap.org/data/2.5/weather?q=' + cityInput + '&APPID=ab5ae10bb222c2259144e71e0e09959d')
                .then((response) => response.json())
                .then((data) => {
                    if(data.message === 'city not found'){
                        reportSectionHeading.textContent = "City Not Found!";
                        weatherReport.style.display = 'none';
                        celsius.style.display = 'none';
                        fahrenheit.style.display = 'none';
                     }
                     else if(cityInput === ""){
                        reportSectionHeading.textContent = "Searchbox is empty!";
                        weatherReport.style.display = 'none';
                        celsius.style.display = 'none';
                        fahrenheit.style.display = 'none';
                    }
                     else{
                        weatherReport.style.display = 'block';
                        reportSectionHeading.textContent = `Weather report on ${cityInput}`;
                        weatherReport.textContent = `Today in ${cityInput}, ` + 'the weather condition is ' + data.weather[0].description + ', ' + 'the wind speed is ' + data.wind.speed + ', ' + 'temperature is ' + data.main.temp + '째K' + ' and humidity is ' + data.main.humidity + '.'
                        celsius.style.display = 'inline-block';
                        fahrenheit.style.display = 'inline-block';
                     }


                    reportSectionContainer.style.display = 'block';
                    weatherReport.textContent = `Today in ${cityInput}, ` + 'the weather condition is ' + data.weather[0].description + ', ' + 'the wind speed is ' + data.wind.speed + ', ' + 'temperature is ' + data.main.temp + '째K' + ' and humidity is ' + data.main.humidity + '.'
                    console.log(data)

                     //convert to Fahrenheit
                    fahrenheit.addEventListener('click', convertToFahrenheit = () => {
                        weatherReport.textContent = `Converted to Fahrenheit, the weather in ${cityInput} is ` + parseInt(data.main.temp - 273.15) * 9/5 + '째F';
                    })

                    //convert to Celsius
                    celsius.addEventListener('click', convertToCelsius = () => {
                        weatherReport.textContent = `Converted to Celsius, the weather in ${cityInput} is ` + parseInt(data.main.temp - 273.15) + '째C';
                    })


                    //Loading map by assigning link
                    mapImage.src = ('https://maps.googleapis.com/maps/api/staticmap?center=' + cityInput + '&zoom=12&size=600x300&maptype=roadmap&markers=color:blue%7Clabel:S%7C' + data.coord.lat + ',' + data.coord.lon + '&key=AIzaSyBAZKbYaZnUJ5yS9Vy6FjHkjKaCnrN06ug')
                    })
                .catch((err) => console.log(err))  
            }
            searchButton.addEventListener('click', getData);
            mapImage.src = ('https://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&zoom=13&size=600x300&maptype=roadmap&markers=color:blue%7Clabel:S%7C40.702147,-74.015794&markers=color:green%7Clabel:G%7C40.711614,-74.012318&markers=color:red%7Clabel:C%7C40.718217,-73.998284&key=AIzaSyBAZKbYaZnUJ5yS9Vy6FjHkjKaCnrN06ug')
    
        </script>
    </body>
</html>